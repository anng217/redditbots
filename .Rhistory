main = 'Alpha in OLS')+
abline(v = mean(a0),col = 'blue')
plot(b0d,
main = 'Beta in OLS')+
abline(v = mean(b0),col = 'blue')
plot(aGd,
main = 'Alpha in GLS')+
abline(v = mean(aGd),col = 'blue')
plot(bGd,
main = 'Beta in GLS')+
abline(v = mean(bGd),col = 'blue')
var(a0)
var(aG)
var(b0)
var(bG)
mean(a0)
mean(aG)
mean(b0)
mean(bG)
babe <- 'dumb'
#common procedure
rm(list=ls())
#Checking messy library
.libPaths()
.libPaths(.libPaths()[2])
library(data.table)
library(dplyr)
library(ggplot2)
library(tidyverse)
library(RColorBrewer)
library(viridis)
library(sqldf)
library(plotly)
library(viridis)
library(paletteer)
library(reshape2)
setwd('E:/github/redditbots')
# Working directory
getwd()
#Load data
read_csv('E:/github/redditbots/data/fds/fds_subm.csv')
#Load data
fds_subm <- read_csv('E:/github/redditbots/data/fds/fds_subm.csv')
View(fds_subm)
View(fds_subm)
fds_subsc <- fds_subm %>% select(c('created_utc','subreddit_subscribers'))
View(fds_subsc)
View(fds_subsc)
install.packages('lubridate')
install.packages('lubridate')
install.packages("lubridate")
library(lubridate)
fds_subsc <- fds_subm %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = lubridate::as_datetime(created_utc))
View(fds_subsc)
fds_subsc <- fds_subm %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = lubridate::as_date(created_utc))
View(fds_subsc)
fds_subsc <- fds_subm %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = lubridate::as_datetime(created_utc)) %>%
group_by
fds_subsc <- fds_subm %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc)))
View(fds_subsc)
summarise(max = max(subreddit_subscribers)
summarise((max = max(subreddit_subscribers))
fds_subsc <- fds_subm %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers))
View(fds_subsc)
fm_post <- read_csv('~/data/control-fds/feminism_unb_post_res.csv')
fm_post <- read_csv('"~/data/control-fds/feminism_unb_post_res.csv')
fm_post <- read_csv('E:/github/redditbots/data/control-fds/feminism_unb_post_res.csv')
View(fm_post)
View(fm_post)
fm_pre <- read_csv('E:/github/redditbots/data/control-fds/feminism_unb_pre_res.csv')
fm_pre <- read_csv('~/data/control-fds/feminism_unb_pre_res.csv')
fm_pre <- read_csv("~/data/control-fds/feminism_unb_pre_res.csv")
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag))
View(test)
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
x <- list(rep(1,n(test)))
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
x <- list(rep(1,len(test)))
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
x <- list(rep(1,len(test)))
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
x <- list(rep(1,length(test)))
x <- list(rep(1,length(test)))
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag))
cbind(test,x)
length(test)
x <- list(rep(1,row(test)))
cbind(test,x)
row(test)
nrow(test)
x <- list(rep(1,nrow(test)))
cbind(test,x)
#control groups
test <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = 1)
View(test)
#control groups
pre <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = 0)
#control groups
control_pre <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = 0)
fds_pre <- read_csv('~/data/fds/fds_unb_pre_res.csv')
fds_post <- read_csv('~/data/fds/fds_unb_post_res.csv')
fds_pre <- read_csv('E:/github/redditbots/data/fds/fds_unb_pre_res.csv')
fds_post <- read_csv('E:/github/redditbots/data/fds/fds_unb_post_res.csv')
control_pre <- fm_pre %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = 0)
df%>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = post)
df%>%
dplyr::mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = post)
df <- df%>%
dplyr::mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = post)
clean <- function(df,post) {
df <- df%>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = post)
return(df)
}
gc()
fds_subm.cleaned <- clean(fds_subm)
View(fds_subm)
fds_pre.cleaned <- clean(fds_pre, post = 0)
View(fds_pre.cleaned)
fds_post_cleaned <- clean(fds_post, post = 1)
#Apply function clean
fds_pre_cleaned <- clean(fds_pre, post = 0)
fds_df <- rbind(fds_pre_cleaned, fds_post_cleaned)
fds_df <- rbind(fds_pre_cleaned, fds_post_cleaned) %>% unique()
View(fds_df)
fds_df <- rbind(fds_pre_cleaned, fds_post_cleaned)[-31,]
(fm_pre, post = 0)
fm_post_clean <- clean(fm_post, post = 1)
fm_pre_clean <- clean(fm_pre, post = 0)
fm_df <- rbind(fm_pre_clean,fm_post_clean)
View(fm_df)
fm_df <- rbind(fm_pre_clean,fm_post_clean)[-31,]
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers))
df <- df %>%
base::select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers))
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers))
df <- read_csv(source_dir)
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers))
return(df)
}
fds_subsc <-subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
View(fds_subsc)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))
return(df)
}
fds_subsc <-subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
df <- df%>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time) %>%
summarise(toxicity_m = mean(toxicity), severe_toxicity_m = mean(severe_toxicity), obscene_m = mean(obscene),
identity_attack_m = mean(identity_attack), insult_m = mean(insult), threat_m = mean(threat),
sexual_explicit_m = mean(sexual_explicit),
toxicity_p = mean(toxicity_flag), severe_toxicity_p = mean(severe_toxicity_flag),
obscene_p = mean(obscene_flag), identity_attack_p = mean(identity_attack_flag), insult_p = mean(insult_flag),
threat_p = mean(threat_flag), sexual_explicit_p = mean(sexual_explicit_flag)) %>%
mutate(post = post)%>%
rename (max=subscriber)
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))%>%
rename (max=subscriber_num())
return(df)
}
fds_subsc <- subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
View(subscriber_num)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))%>%
rename (max=subscriber)
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))%>%
rename (max=subscriber)
return(df)
}
fds_subsc <- subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
View(fds_subm)
View(fds_subsc)
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))%>%
rename (max=subscriber)
return(df)
}
fds_subsc <- subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
df[2] <- 'subscriber'
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))
df[2] <- 'subscriber'
return(df)
}
fds_subsc <- subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
View(fds_subsc)
View(fds_subsc)
subscriber_num <- function(source_dir){
df <- read_csv(source_dir)
df <- df %>%
select(c('created_utc','subreddit_subscribers')) %>%
mutate(time = as_date(lubridate::as_datetime(created_utc))) %>%
group_by(time)%>%
summarise(max = max(subreddit_subscribers)) %>%
filter(time >= as.Date('2019-09-28') & time <= as.Date('2019-11-27'))
names(df)[2] <- 'subscriber'
return(df)
}
fds_subsc <- subscriber_num('E:/github/redditbots/data/fds/fds_subm.csv')
twoX_pre <- read_csv('E:/github/redditbots/data/fds/twoX_unb_pre_res.csv')
twoX_post <- read_csv('E:/github/redditbots/data/fds/twoX_unb_post_res.csv')
twoX_pre <- read_csv('E:/github/redditbots/data/control-fds/twoX_unb_pre_res.csv')
twoX_post <- read_csv('E:/github/redditbots/data/control-fds/twoX_unb_post_res.csv')
twoX_pre <- read_csv('E:/github/redditbots/data/control-fds/ttwoX_unb_post_res.csv.csv') #Change the name feom detoxify so wrong
twoX_pre <- read_csv('E:/github/redditbots/data/control-fds/ttwoX_unb_post_res.csv') #Change the name feom detoxify so wrong
twoX_pre <- read_csv('E:/github/redditbots/data/control-fds/twoX_unb_post_res.csv') #Change the name feom detoxify so wrong
twoX_post <- read_csv('E:/github/redditbots/data/control-fds/twoX_unb_post_post.csv') #Change the name from detoxify so wrong
twoX_pre_clean <- clean(twoX_pre, post = 0)
twoX_post_clean <- clean(twoX_post, post = 1)
twoX <- rbind(twoX_pre_clean, twoX_post_clean)
View(twoX)
twoX <- rbind(twoX_pre_clean, twoX_post_clean)[-31,]
wvsp_pre <- read_csv('E:/github/redditbots/data/control-fds/wvsp_unb_pre_res.csv')
wvsp_post <- read_csv('E:/github/redditbots/data/control-fds/wvsp_unb_post_res.csv')
wvsp_pre_clean <- clean(wvsp_pre,post=0)
wvsp_post_clean <- clean(wvsp_post,post=1)
wvsp <- rbind(wvsp_pre_clean, wvsp_post_clean)
View(wvsp)
View(fm_df)
wvsp <- rbind(wvsp_pre_clean, wvsp_post_clean)[-31,]
View(fds_subsc)
View(fds_subsc)
#identity attack
cbind(fds_df['identity_attack_m'],fds_subsc['subscriber'],fm_df['identity_attack_m'],twoX['identity_attack_m'],wvsp['identity_attack_m'])
#identity attack
test <- cbind(fds_df['identity_attack_m'],fds_subsc['subscriber'],fm_df['identity_attack_m'],twoX['identity_attack_m'],wvsp['identity_attack_m'])
View(test)
names(test)[1,2] <- c('Y','X')
names(test)[1] <- 'Y'
names(test)[3] <- 'feminist'
names(test)[3] <- 'feminism'
names(test)[3] <- 'twoX'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
View(test)
head(test)
View(test)
install.packages('CausalImpact')
library(CausalImpact)
pre.period <- c(1, 30)
post.period <- c(31, 61)
impact <- CausalImpact(test, pre.period, post.period)
plot(impact)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
plot(impact)
matplot(test, type = "l")
gc()
View(test)
test$subscriber <- log(test$subscriber)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
plot(impact)
test <- cbind(fds_df['toxicity_m'],fds_subsc['subscriber'],fm_df['toxicity_m'],
twoX['toxicity_m'],wvsp['toxicity_m'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
test$subscriber <- log(test$subscriber)
pre.period <- c(1, 30)
post.period <- c(31, 61)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
plot(impact)
test <- cbind(fds_df['threat_f'],fds_subsc['subscriber'],fm_df['threat_f'],
twoX['threat_f'],wvsp['threat_f'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
names(fds_df)
test <- cbind(fds_df['threat_p'],fds_subsc['subscriber'],fm_df['threat_p'],
twoX['threat_p'],wvsp['threat_p'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
test$subscriber <- log(test$subscriber)
pre.period <- c(1, 30)
post.period <- c(31, 61)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
plot(impact)
test <- cbind(fds_df['identity_p'],fds_subsc['subscriber'],fm_df['identity_p'],
twoX['identity_p'],wvsp['identity_p'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
test <- cbind(fds_df['identity_attack_p'],fds_subsc['subscriber'],fm_df['identity_attack_p'],
twoX['identity_attack_p'],wvsp['identity_attack_p'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
test$subscriber <- log(test$subscriber)
pre.period <- c(1, 30)
post.period <- c(31, 61)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
plot(impact)
#identity attack
test <- cbind(fds_df['identity_attack_m'],fds_subsc['subscriber'],fm_df['identity_attack_m'],twoX['identity_attack_m'],wvsp['identity_attack_m'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
pre.period <- c(1, 30)
post.period <- c(31, 61)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
test <- cbind(fds_df['identity_attack_p'],fds_subsc['subscriber'],fm_df['identity_attack_p'],
twoX['identity_attack_p'],wvsp['identity_attack_p'])
names(test)[1] <- 'Y'
names(test)[3] <- 'feminism'
names(test)[4] <- 'twoX'
names(test)[5] <- 'wvsp'
pre.period <- c(1, 30)
post.period <- c(31, 61)
impact <- CausalImpact(test, pre.period, post.period,  model.args = list(niter = 5000, nseasons = 7))
